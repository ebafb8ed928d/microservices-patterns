### 1.1.2 모놀리식 아키텍처의 장점

- 개발이 간단하다
- 어플리케이션을 쉽게 변경할 수 있다
- 테스트하기 쉽다
- 배포하기 쉽다
- 확장하기 쉽다

### 1.1.3 모놀리식 지옥의 실상

개발팀의 몸집이 커지면서 거대한 모놀리스로 바뀌고, 애자일하게 개발/배포도 불가능하게 변합니다.

- 개발이 더뎌진다
- 커밋부터 배포에 이르는 길고 험난한 여정
- 확장하기 어렵다
- 확실하게 전달하기 어렵다
- 갈수록 한물간 기술 스택에 발목이 붙잡힌다

### 1.4.1 확장 큐브와 마이크로서비스

<The Art of Scalability(확장의 기술)>에 따르면, 어플리케이션은 X축, Y축, Z축 세 방향으로 확장시킬 수 있습니다.

- X축 확장: 다중 인스턴스에 고루 요청 분산
  X 축 확장은 일반적인 모놀리식 어플리케이션의 확장 수단입니다. Load Balancer 뒤에 N 개의 어플리케이션을 띄워 놓고 고르게 분배합니다.

- Z축 확장 : 요청 속성별 라우팅(샤딩과 비슷?)
  인스턴스 앞면에 위치한 라우터는 요청의 속성에 알맞은 인스턴스로 요청을 라우팅합니다. 예를 들어, '김' 씨 이름을 가진 유저와, '한'씨 성을 가진 유저가 다른 어플리케이션으로 요청을 하게 됩니다.

- Y축 확장 : 기능에 따라 어플리케이션을 서비스로 분해
  X/Z축 확장을 하면 어플리케이션 능력과 가용성은 개선되지만, 어플리케이션이 점점 더 복잡해집니다. 따라서 Y축 확장, 즉 기능 분해가 필요합니다. 즉 모놀리식 어플리케이션을 기능별로 여러 서비스로 쪼개는 것입니다.중요한 사실은, 각 서비스가 집중된(focused)/응집된(cohesive) 책임을 맡고 있다는 사실입니다.

### 1.4.2 마이크로서비스는 모듈성을 갖고 있다.

마이크로서비스 아키텍처는 서비스를 모듈성의 단위로 사용합니다. 각 서비스는 다른 서비스가 함부로 규칙을 어기고 침투하지 못하게 API 라는 경계선을 갖고 있어서, 다른 서비스 API 를 우회하여 그 내부 클래스에 마음대로 들어올 수 없습니다.

### 1.4.3 서비스마다 DB 가 따로 있다.

마이크로서비스는 서로 느슨하게 결합되어 있고 오직 API 를 통해서만 통신합니다.

### 1.4.5 마이크로서비스 아키텍처와 SOA

마이크로서비스와 SOA(Service Oriented Archirecture) 는 다음과 같은 특징을 가지고 있습니다.

| 구분           | SOA                                                                                                   | 마이크로서비스                                                                                            |
| -------------- | ----------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| 서비스 간 통신 | SOAP, WS 표준처럼 무거운 프로토콜을 응용한 엔터프라이즈 서비스 버스 중심의 스마트 파이프 (smart pipe) | REST 나 gRPC 처럼 가벼운 프로토콜을 응용한 메시지 브로커 또는 서비스 간 통신 중심의 덤 파이프 (dumb pipe) |
| 데이터         | 전역 데이터 모델 및 공유 DB                                                                           | 서비스 개별 데이터 모델 및 DB                                                                             |
| 주요 사례      | 대규모 모놀리식 어플리케이션                                                                          | 소규모 서비스                                                                                             |

## 1.5 마이크로서비스 아키텍처의 장단점

### 1.5.1 마이크로서비스 아키텍처의 장점

마이크로서비스 아키텍처는 다음과 같은 장점이 있습니다

- 크고 복잡한 어플리케이션을 지속적으로 전달/배포할 수 있습니다
  - 소프트웨어를 빠르게, 자주, 확실하게 배포할 수 있습니다
- 서비스 규모가 작아 관리하기 쉽습니다.
  - 코드를 이해하기 쉽고 IDE 가 느려지지 않는다
- 마이크로서비스 아키텍처 덕분에 팀이 자율적으로 움직입니다
  - 마이크로서비스는 독립적으로 X축(복제)/Z축( 파티셔닝) 확장을 할 수 있고, 서비스마다 상이한 리소스 요건에 맞추어 하드웨어에 배포할 수 있습니다.
- 결함 격리가 잘됩니다.
  - 어느 서비스에 메모리 누수가 발생하더라도 해당 서비스만 영향을 받고 다른 서비스는 계속 정상 가동됩니다.
- 새로운 기술을 실험하고 도입하기 쉽습니다.
  - 특정 기술 스택을 작은 서비스에 적은 부담으로 도입해 볼 수 있습니다.

### 1.5.2 마이크로서비스 아키텍처의 단점

- 딱 맞는 서비스를 찾기가 쉽지 않다.
  - 만약 시스템을 잘못 분해할 경우, 모놀리식/마이크로서비스 아키텍처의 단점만 있는 분산 모놀리스를 구축하게 됩니다.
- 분산시스템은 복잡하다
  - 서비스 간 통신에 필수적인 IPC 역시 단순 메서드 호출보다는 복잡하며, latnecy 가 긴 원격 서비스, 부분 실패한 서비스를 처리할 수 있게 설계해야 합니다. 특정 서비스마다 DB 가 따로 있기 때문에 다중 DB 에 접속하여 조회하고 트랜잭션을 구현하는 일이 어렵습니다. 그래서 마이크로서비스 아키텍처는 saga 라는 기술로 서비스 간 데이터 일관성을 유지합니다.
- 여러 서비스에 걸친 공통 기능은 배포할 때 잘 살펴야 한다
  - 여러 개발팀 간에 세심한 조율이 필요한 경우가 있습니다
- 도입 시기를 결정하기 어렵다
  - 초기에는 모놀리식 구조가 효율적이고, 시스템의 규모가 커지면 마이크로서비스 방식이 효율적입니다.
